<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.lcov - contracts/main-sc.clar</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">contracts</a> - main-sc.clar<span style="font-size: 80%;"> (source / <a href="main-sc.clar.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.lcov</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">293</td>
            <td class="headerCovTableEntry">298</td>
            <td class="headerCovTableEntryHi">98.3 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2023-01-04 11:10:38</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">51</td>
            <td class="headerCovTableEntry">53</td>
            <td class="headerCovTableEntryHi">96.2 %</td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : ;; Wrapper</a>
<a name="2"><span class="lineNum">       2 </span>            : </a>
<a name="3"><span class="lineNum">       3 </span>            : ;; Constants</a>
<a name="4"><span class="lineNum">       4 </span>            : </a>
<a name="5"><span class="lineNum">       5 </span>            : (define-constant contract-owner tx-sender)</a>
<a name="6"><span class="lineNum">       6 </span>            : </a>
<a name="7"><span class="lineNum">       7 </span>            : (define-constant err-owner-only (err u100))</a>
<a name="8"><span class="lineNum">       8 </span>            : (define-constant err-insufficient-balance (err u101))</a>
<a name="9"><span class="lineNum">       9 </span>            : (define-constant err-invalid-sender (err u102))</a>
<a name="10"><span class="lineNum">      10 </span>            : (define-constant err-not-some (err u103))</a>
<a name="11"><span class="lineNum">      11 </span>            : (define-constant err-invalid-destination-contract (err u104))</a>
<a name="12"><span class="lineNum">      12 </span>            : (define-constant err-inexistent-item (err u105))</a>
<a name="13"><span class="lineNum">      13 </span>            : (define-constant err-already-claimed (err u106))</a>
<a name="14"><span class="lineNum">      14 </span>            : </a>
<a name="15"><span class="lineNum">      15 </span>            : ;; Transfer</a>
<a name="16"><span class="lineNum">      16 </span>            : </a>
<a name="17"><span class="lineNum">      17 </span>            : (define-public (transfer-wrapper (token-id uint) (amount uint) (sender principal) (recipient principal)) </a>
<a name="18"><span class="lineNum">      18 </span><span class="lineCov">        168 :   (if (&lt; token-id u5) </span></a>
<a name="19"><span class="lineNum">      19 </span><span class="lineCov">         45 :     (contract-call? .resources transfer token-id amount sender recipient) </span></a>
<a name="20"><span class="lineNum">      20 </span><span class="lineCov">        132 :     (if (&lt; token-id u50) </span></a>
<a name="21"><span class="lineNum">      21 </span><span class="lineCov">        155 :       (contract-call? .items transfer token-id amount sender recipient) </span></a>
<a name="22"><span class="lineNum">      22 </span><span class="lineCov">          8 :       (if (&lt; token-id u58) </span></a>
<a name="23"><span class="lineNum">      23 </span><span class="lineCov">          5 :         (contract-call? .collection-1 transfer token-id amount sender recipient) </span></a>
<a name="24"><span class="lineNum">      24 </span><span class="lineCov">          1 :         err-inexistent-item))))</span></a>
<a name="25"><span class="lineNum">      25 </span>            : </a>
<a name="26"><span class="lineNum">      26 </span>            : </a>
<a name="27"><span class="lineNum">      27 </span>            : ;; Balance</a>
<a name="28"><span class="lineNum">      28 </span>            : </a>
<a name="29"><span class="lineNum">      29 </span>            : (define-read-only (get-balance-wrapper (token-id uint) (who principal)) </a>
<a name="30"><span class="lineNum">      30 </span><span class="lineCov">        832 :   (if (&lt; token-id u5) </span></a>
<a name="31"><span class="lineNum">      31 </span><span class="lineCov">        162 :     (contract-call? .resources get-balance token-id who) </span></a>
<a name="32"><span class="lineNum">      32 </span><span class="lineCov">        616 :     (if (&lt; token-id u50) </span></a>
<a name="33"><span class="lineNum">      33 </span><span class="lineCov">        429 :       (contract-call? .items get-balance token-id who) </span></a>
<a name="34"><span class="lineNum">      34 </span><span class="lineCov">         44 :       (if (&lt; token-id u58) </span></a>
<a name="35"><span class="lineNum">      35 </span><span class="lineCov">         30 :         (contract-call? .collection-1 get-balance token-id who)</span></a>
<a name="36"><span class="lineNum">      36 </span><span class="lineCov">          1 :         err-inexistent-item))))</span></a>
<a name="37"><span class="lineNum">      37 </span>            : </a>
<a name="38"><span class="lineNum">      38 </span>            :   (define-constant all-items-list (list {token-id: u1} {token-id: u2} {token-id: u3} {token-id: u4} {token-id: u5} {token-id: u6} {token-id: u7} {token-id: u8} {token-id: u9} {token-id: u10} {token-id: u11} {token-id: u12} {token-id: u13} {token-id: u14}))</a>
<a name="39"><span class="lineNum">      39 </span>            : </a>
<a name="40"><span class="lineNum">      40 </span>            :   (define-private (create-balance-tuple (token-id uint) (who principal)) </a>
<a name="41"><span class="lineNum">      41 </span><span class="lineNoCov">          0 :     {token-id: token-id, who: who })</span></a>
<a name="42"><span class="lineNum">      42 </span>            : </a>
<a name="43"><span class="lineNum">      43 </span>            :   (define-private (get-data-balance-all-items (balance-tuple {token-id: uint, who: principal})) </a>
<a name="44"><span class="lineNum">      44 </span><span class="lineNoCov">          0 :     {token-id: (get token-id balance-tuple), balance: (get-balance-wrapper (get token-id balance-tuple) (get who balance-tuple))})</span></a>
<a name="45"><span class="lineNum">      45 </span>            : </a>
<a name="46"><span class="lineNum">      46 </span>            :   ;; (define-read-only (get-balance-all-items (who principal)) </a>
<a name="47"><span class="lineNum">      47 </span>            :   ;; ;; (let ((list-who (list who who who who who who who who who who who who who who)))</a>
<a name="48"><span class="lineNum">      48 </span>            :   ;;   (merge  tuple-2)))</a>
<a name="49"><span class="lineNum">      49 </span>            : </a>
<a name="50"><span class="lineNum">      50 </span>            :   ;; (define-private (merge-tuples) (tuple (key-1 val-1)))</a>
<a name="51"><span class="lineNum">      51 </span>            : </a>
<a name="52"><span class="lineNum">      52 </span>            :  ;;(map get-data-balance-all-items </a>
<a name="53"><span class="lineNum">      53 </span>            :     ;;(map (create-balance-tuple all-items-list ) who))</a>
<a name="54"><span class="lineNum">      54 </span>            :     ;;</a>
<a name="55"><span class="lineNum">      55 </span>            :  ;;(let  ((level-up-resources (unwrap-panic (get-level-up-resources id-new))))</a>
<a name="56"><span class="lineNum">      56 </span>            : </a>
<a name="57"><span class="lineNum">      57 </span>            : </a>
<a name="58"><span class="lineNum">      58 </span>            : ;;  (define-private (get-data-level-up (id uint))</a>
<a name="59"><span class="lineNum">      59 </span>            : ;;   {id: id, level-up-data: (unwrap-panic (map-get? level-up-system {id: id}))})</a>
<a name="60"><span class="lineNum">      60 </span>            : </a>
<a name="61"><span class="lineNum">      61 </span>            : ;; (define-read-only (get-all-level-up-data) </a>
<a name="62"><span class="lineNum">      62 </span>            : ;;   (ok (map get-data-level-up level-up-id-list)))</a>
<a name="63"><span class="lineNum">      63 </span>            : </a>
<a name="64"><span class="lineNum">      64 </span>            : </a>
<a name="65"><span class="lineNum">      65 </span>            : ;; Mint</a>
<a name="66"><span class="lineNum">      66 </span>            : </a>
<a name="67"><span class="lineNum">      67 </span>            : (define-public (mint-wrapper (token-id uint) (amount uint) (recipient principal)) </a>
<a name="68"><span class="lineNum">      68 </span><span class="lineCov">       1300 :   (if (&lt; token-id u5) </span></a>
<a name="69"><span class="lineNum">      69 </span><span class="lineCov">       1240 :     (contract-call? .resources mint token-id amount recipient) </span></a>
<a name="70"><span class="lineNum">      70 </span><span class="lineCov">         60 :     (if (&lt; token-id u50) </span></a>
<a name="71"><span class="lineNum">      71 </span><span class="lineCov">         44 :       (contract-call? .items mint token-id amount recipient) </span></a>
<a name="72"><span class="lineNum">      72 </span><span class="lineCov">         16 :       (if (&lt; token-id u58) </span></a>
<a name="73"><span class="lineNum">      73 </span><span class="lineCov">          8 :         (contract-call? .collection-1 mint token-id amount recipient)</span></a>
<a name="74"><span class="lineNum">      74 </span><span class="lineCov">          2 :         err-inexistent-item))))</span></a>
<a name="75"><span class="lineNum">      75 </span>            : </a>
<a name="76"><span class="lineNum">      76 </span>            : </a>
<a name="77"><span class="lineNum">      77 </span>            : (define-private (mint-wrapper-user (token-id uint) (amount uint) (recipient principal)) </a>
<a name="78"><span class="lineNum">      78 </span><span class="lineCov">       1004 :   (if (&lt; token-id u5) </span></a>
<a name="79"><span class="lineNum">      79 </span><span class="lineCov">         65 :     (as-contract (contract-call? .resources mint-user token-id amount recipient))</span></a>
<a name="80"><span class="lineNum">      80 </span><span class="lineCov">        952 :     (if (&lt; token-id u50) </span></a>
<a name="81"><span class="lineNum">      81 </span><span class="lineCov">       1165 :       (as-contract (contract-call? .items mint-user token-id amount recipient))</span></a>
<a name="82"><span class="lineNum">      82 </span><span class="lineCov">         20 :       (if (&lt; token-id u58) </span></a>
<a name="83"><span class="lineNum">      83 </span><span class="lineCov">         25 :         (as-contract (contract-call? .collection-1 mint-user token-id amount recipient))</span></a>
<a name="84"><span class="lineNum">      84 </span><span class="lineNoCov">          0 :         err-inexistent-item))))</span></a>
<a name="85"><span class="lineNum">      85 </span>            : </a>
<a name="86"><span class="lineNum">      86 </span>            : (define-private (mint-wrapper-admin (token-id uint) (amount uint) (recipient principal))</a>
<a name="87"><span class="lineNum">      87 </span><span class="lineCov">         21 :   (begin</span></a>
<a name="88"><span class="lineNum">      88 </span><span class="lineCov">         21 :     (some </span></a>
<a name="89"><span class="lineNum">      89 </span><span class="lineCov">         84 :       (if (&lt; token-id u5) </span></a>
<a name="90"><span class="lineNum">      90 </span><span class="lineCov">         60 :         (contract-call? .resources mint token-id amount recipient) </span></a>
<a name="91"><span class="lineNum">      91 </span><span class="lineCov">         24 :         (if (&lt; token-id u50) </span></a>
<a name="92"><span class="lineNum">      92 </span><span class="lineCov">          4 :           (contract-call? .items mint token-id amount recipient) </span></a>
<a name="93"><span class="lineNum">      93 </span><span class="lineCov">         20 :           (if (&lt; token-id u58) </span></a>
<a name="94"><span class="lineNum">      94 </span><span class="lineCov">         20 :             (contract-call? .collection-1 mint token-id amount recipient)</span></a>
<a name="95"><span class="lineNum">      95 </span><span class="lineNoCov">          0 :             err-inexistent-item))))</span></a>
<a name="96"><span class="lineNum">      96 </span><span class="lineCov">         21 :     recipient))</span></a>
<a name="97"><span class="lineNum">      97 </span>            : </a>
<a name="98"><span class="lineNum">      98 </span>            : </a>
<a name="99"><span class="lineNum">      99 </span>            : (define-private (mint-rewards (reward-tuple {resource-id: uint, resource-qty: uint}) (user principal)) </a>
<a name="100"><span class="lineNum">     100 </span><span class="lineCov">        126 :   (mint-wrapper-admin (get resource-id reward-tuple) (get resource-qty reward-tuple) user))</span></a>
<a name="101"><span class="lineNum">     101 </span>            : </a>
<a name="102"><span class="lineNum">     102 </span>            : ;; Burn</a>
<a name="103"><span class="lineNum">     103 </span>            : </a>
<a name="104"><span class="lineNum">     104 </span>            : (define-public (burn-wrapper (burn-tuple {resource-id: uint, resource-qty: uint}))</a>
<a name="105"><span class="lineNum">     105 </span><span class="lineCov">       2830 :   (if (&lt; (get resource-id burn-tuple) u5)</span></a>
<a name="106"><span class="lineNum">     106 </span><span class="lineCov">       2610 :     (contract-call? .resources burn (get resource-id burn-tuple) (get resource-qty burn-tuple) tx-sender) </span></a>
<a name="107"><span class="lineNum">     107 </span><span class="lineCov">        655 :     (if (&lt; (get resource-id burn-tuple) u50) </span></a>
<a name="108"><span class="lineNum">     108 </span><span class="lineCov">        774 :       (contract-call? .items burn (get resource-id burn-tuple) (get resource-qty burn-tuple) tx-sender)</span></a>
<a name="109"><span class="lineNum">     109 </span><span class="lineCov">         10 :       (if (&lt; (get resource-id burn-tuple) u58)</span></a>
<a name="110"><span class="lineNum">     110 </span><span class="lineCov">          6 :         (contract-call? .collection-1 burn (get resource-id burn-tuple) (get resource-qty burn-tuple) tx-sender)</span></a>
<a name="111"><span class="lineNum">     111 </span><span class="lineCov">          1 :         err-inexistent-item))))</span></a>
<a name="112"><span class="lineNum">     112 </span>            : </a>
<a name="113"><span class="lineNum">     113 </span>            : </a>
<a name="114"><span class="lineNum">     114 </span>            : ;; Ownership</a>
<a name="115"><span class="lineNum">     115 </span>            : </a>
<a name="116"><span class="lineNum">     116 </span>            : (define-private (is-owned-needed-wrapper (item {resource-id: uint, resource-qty: uint})) </a>
<a name="117"><span class="lineNum">     117 </span><span class="lineCov">        598 :   (unwrap-panic </span></a>
<a name="118"><span class="lineNum">     118 </span><span class="lineCov">       2990 :     (if (&lt; (get resource-id item) u5) </span></a>
<a name="119"><span class="lineNum">     119 </span><span class="lineCov">        920 :       (contract-call? .resources is-owned-needed item) </span></a>
<a name="120"><span class="lineNum">     120 </span><span class="lineCov">        690 :       (if (&lt; (get resource-id item) u50) </span></a>
<a name="121"><span class="lineNum">     121 </span><span class="lineCov">        274 :         (contract-call? .items is-owned-needed item) </span></a>
<a name="122"><span class="lineNum">     122 </span><span class="lineCov">          5 :         (if (&lt; (get resource-id item) u58) </span></a>
<a name="123"><span class="lineNum">     123 </span><span class="lineCov">          2 :           (contract-call? .collection-1 is-owned-needed item) </span></a>
<a name="124"><span class="lineNum">     124 </span><span class="lineNoCov">          0 :           err-inexistent-item)))))</span></a>
<a name="125"><span class="lineNum">     125 </span>            : </a>
<a name="126"><span class="lineNum">     126 </span>            : (define-private (verified-ownership-function (resources-needed (list 100 { resource-id: uint, resource-qty: uint} )))</a>
<a name="127"><span class="lineNum">     127 </span><span class="lineCov">       1076 :   (fold and (map is-owned-needed-wrapper resources-needed) true)) </span></a>
<a name="128"><span class="lineNum">     128 </span>            : </a>
<a name="129"><span class="lineNum">     129 </span>            : ;; Starter kit</a>
<a name="130"><span class="lineNum">     130 </span>            : </a>
<a name="131"><span class="lineNum">     131 </span>            : (define-map starter-kit-system { user: principal } { claimed: bool })</a>
<a name="132"><span class="lineNum">     132 </span>            : </a>
<a name="133"><span class="lineNum">     133 </span>            : (define-read-only (get-starter-kit-status (user principal))</a>
<a name="134"><span class="lineNum">     134 </span><span class="lineCov">          6 :   (let ((claimed (map-get? starter-kit-system {user: user})))</span></a>
<a name="135"><span class="lineNum">     135 </span><span class="lineCov">          4 :     (ok claimed)))</span></a>
<a name="136"><span class="lineNum">     136 </span>            : </a>
<a name="137"><span class="lineNum">     137 </span>            : (define-public (claim-starter-kit)</a>
<a name="138"><span class="lineNum">     138 </span><span class="lineCov">          3 :   (begin </span></a>
<a name="139"><span class="lineNum">     139 </span><span class="lineCov">         13 :     (asserts! (is-none (map-get? starter-kit-system {user: tx-sender})) err-already-claimed)</span></a>
<a name="140"><span class="lineNum">     140 </span><span class="lineCov">         10 :     (some (mint-wrapper-user u1 u15 tx-sender))</span></a>
<a name="141"><span class="lineNum">     141 </span><span class="lineCov">         10 :     (some (mint-wrapper-user u2 u100 tx-sender))</span></a>
<a name="142"><span class="lineNum">     142 </span><span class="lineCov">          8 :     (ok (map-set starter-kit-system {user: tx-sender} {claimed: true}))))</span></a>
<a name="143"><span class="lineNum">     143 </span>            : </a>
<a name="144"><span class="lineNum">     144 </span>            : ;; Level-up</a>
<a name="145"><span class="lineNum">     145 </span>            : </a>
<a name="146"><span class="lineNum">     146 </span>            : (define-map level-up-system { id: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="147"><span class="lineNum">     147 </span>            : </a>
<a name="148"><span class="lineNum">     148 </span>            : (define-public (level-up (id-new uint))</a>
<a name="149"><span class="lineNum">     149 </span><span class="lineCov">         99 :   (begin</span></a>
<a name="150"><span class="lineNum">     150 </span><span class="lineCov">        594 :     (asserts! (not (is-none (unwrap-panic (get-level-up-resources id-new)))) err-not-some)</span></a>
<a name="151"><span class="lineNum">     151 </span><span class="lineCov">        396 :     (let  ((level-up-resources (unwrap-panic (get-level-up-resources id-new))))</span></a>
<a name="152"><span class="lineNum">     152 </span><span class="lineCov">        400 :       (asserts! (verified-ownership-function (unwrap-panic level-up-resources)) err-insufficient-balance)</span></a>
<a name="153"><span class="lineNum">     153 </span><span class="lineCov">        380 :       (some (map  burn-wrapper (unwrap-panic level-up-resources)))</span></a>
<a name="154"><span class="lineNum">     154 </span><span class="lineCov">        380 :       (mint-wrapper-user id-new u1 tx-sender))))</span></a>
<a name="155"><span class="lineNum">     155 </span>            : </a>
<a name="156"><span class="lineNum">     156 </span>            : (define-read-only (get-level-up-resources (token-id uint))</a>
<a name="157"><span class="lineNum">     157 </span><span class="lineCov">        729 :   (let ((token-urr (map-get? level-up-system {id: token-id})))</span></a>
<a name="158"><span class="lineNum">     158 </span><span class="lineCov">        486 :     (ok token-urr)))</span></a>
<a name="159"><span class="lineNum">     159 </span>            : </a>
<a name="160"><span class="lineNum">     160 </span>            : (define-public (set-level-up-resources (token-id uint) (resource-needed (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="161"><span class="lineNum">     161 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="162"><span class="lineNum">     162 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="163"><span class="lineNum">     163 </span><span class="lineCov">          4 :     (ok (map-set level-up-system {id: token-id} resource-needed))))</span></a>
<a name="164"><span class="lineNum">     164 </span>            : </a>
<a name="165"><span class="lineNum">     165 </span><span class="lineCov">         31 : </span></a>
<a name="166"><span class="lineNum">     166 </span><span class="lineCov">        248 : (map-set level-up-system {id: u6} (list {resource-id: u3, resource-qty: u6} {resource-id: u5, resource-qty: u1} {resource-id: u2, resource-qty: u2}))</span></a>
<a name="167"><span class="lineNum">     167 </span><span class="lineCov">        279 : (map-set level-up-system {id: u7} (list {resource-id: u3, resource-qty: u10} {resource-id: u6, resource-qty: u1} {resource-id: u2, resource-qty: u3}))</span></a>
<a name="168"><span class="lineNum">     168 </span><span class="lineCov">        279 : (map-set level-up-system {id: u9} (list {resource-id: u4, resource-qty: u6} {resource-id: u8, resource-qty: u1} {resource-id: u2, resource-qty: u5}))</span></a>
<a name="169"><span class="lineNum">     169 </span><span class="lineCov">        279 : (map-set level-up-system {id: u10} (list {resource-id: u4, resource-qty: u10} {resource-id: u9, resource-qty: u1} {resource-id: u2, resource-qty: u6}))</span></a>
<a name="170"><span class="lineNum">     170 </span><span class="lineCov">        341 : (map-set level-up-system {id: u12} (list {resource-id: u3, resource-qty: u8} {resource-id: u4, resource-qty: u8} {resource-id: u11, resource-qty: u1} {resource-id: u2, resource-qty: u8}))</span></a>
<a name="171"><span class="lineNum">     171 </span><span class="lineCov">        341 : (map-set level-up-system {id: u13} (list {resource-id: u3, resource-qty: u10} {resource-id: u4, resource-qty: u10} {resource-id: u12, resource-qty: u1} {resource-id: u2, resource-qty: u10}))</span></a>
<a name="172"><span class="lineNum">     172 </span><span class="lineCov">        279 : (map-set level-up-system {id: u15} (list {resource-id: u3, resource-qty: u6} {resource-id: u14, resource-qty: u1} {resource-id: u2, resource-qty: u2}))</span></a>
<a name="173"><span class="lineNum">     173 </span><span class="lineCov">        279 : (map-set level-up-system {id: u16} (list {resource-id: u3, resource-qty: u10} {resource-id: u15, resource-qty: u1} {resource-id: u2, resource-qty: u3}))</span></a>
<a name="174"><span class="lineNum">     174 </span><span class="lineCov">        279 : (map-set level-up-system {id: u18} (list {resource-id: u4, resource-qty: u6} {resource-id: u17, resource-qty: u1} {resource-id: u2, resource-qty: u5}))</span></a>
<a name="175"><span class="lineNum">     175 </span><span class="lineCov">        279 : (map-set level-up-system {id: u19} (list {resource-id: u4, resource-qty: u10} {resource-id: u18, resource-qty: u1} {resource-id: u2, resource-qty: u6}))</span></a>
<a name="176"><span class="lineNum">     176 </span><span class="lineCov">        341 : (map-set level-up-system {id: u21} (list {resource-id: u3, resource-qty: u8} {resource-id: u4, resource-qty: u8} {resource-id: u20, resource-qty: u1} {resource-id: u2, resource-qty: u8}))</span></a>
<a name="177"><span class="lineNum">     177 </span><span class="lineCov">        341 : (map-set level-up-system {id: u22} (list {resource-id: u3, resource-qty: u10} {resource-id: u4, resource-qty: u10} {resource-id: u21, resource-qty: u1} {resource-id: u2, resource-qty: u10}))</span></a>
<a name="178"><span class="lineNum">     178 </span><span class="lineCov">        279 : (map-set level-up-system {id: u24} (list {resource-id: u3, resource-qty: u3} {resource-id: u23, resource-qty: u1} {resource-id: u2, resource-qty: u1}))</span></a>
<a name="179"><span class="lineNum">     179 </span><span class="lineCov">        279 : (map-set level-up-system {id: u25} (list {resource-id: u3, resource-qty: u5} {resource-id: u24, resource-qty: u1} {resource-id: u2, resource-qty: u2}))</span></a>
<a name="180"><span class="lineNum">     180 </span><span class="lineCov">        279 : (map-set level-up-system {id: u27} (list {resource-id: u4, resource-qty: u3} {resource-id: u26, resource-qty: u1} {resource-id: u2, resource-qty: u3}))</span></a>
<a name="181"><span class="lineNum">     181 </span><span class="lineCov">        279 : (map-set level-up-system {id: u28} (list {resource-id: u4, resource-qty: u5} {resource-id: u27, resource-qty: u1} {resource-id: u2, resource-qty: u4}))</span></a>
<a name="182"><span class="lineNum">     182 </span><span class="lineCov">        341 : (map-set level-up-system {id: u30} (list {resource-id: u3, resource-qty: u4} {resource-id: u4, resource-qty: u4} {resource-id: u29, resource-qty: u1} {resource-id: u2, resource-qty: u6}))</span></a>
<a name="183"><span class="lineNum">     183 </span><span class="lineCov">        341 : (map-set level-up-system {id: u31} (list {resource-id: u3, resource-qty: u6} {resource-id: u4, resource-qty: u6} {resource-id: u30, resource-qty: u1} {resource-id: u2, resource-qty: u7}))</span></a>
<a name="184"><span class="lineNum">     184 </span><span class="lineCov">        279 : (map-set level-up-system {id: u33} (list {resource-id: u3, resource-qty: u3} {resource-id: u32, resource-qty: u1} {resource-id: u2, resource-qty: u1}))</span></a>
<a name="185"><span class="lineNum">     185 </span><span class="lineCov">        279 : (map-set level-up-system {id: u34} (list {resource-id: u3, resource-qty: u5} {resource-id: u33, resource-qty: u1} {resource-id: u2, resource-qty: u2}))</span></a>
<a name="186"><span class="lineNum">     186 </span><span class="lineCov">        279 : (map-set level-up-system {id: u36} (list {resource-id: u4, resource-qty: u3} {resource-id: u35, resource-qty: u1} {resource-id: u2, resource-qty: u3}))</span></a>
<a name="187"><span class="lineNum">     187 </span><span class="lineCov">        279 : (map-set level-up-system {id: u37} (list {resource-id: u4, resource-qty: u5} {resource-id: u36, resource-qty: u1} {resource-id: u2, resource-qty: u4}))</span></a>
<a name="188"><span class="lineNum">     188 </span><span class="lineCov">        341 : (map-set level-up-system {id: u39} (list {resource-id: u3, resource-qty: u4} {resource-id: u4, resource-qty: u4} {resource-id: u38, resource-qty: u1} {resource-id: u2, resource-qty: u6}))</span></a>
<a name="189"><span class="lineNum">     189 </span><span class="lineCov">        341 : (map-set level-up-system {id: u40} (list {resource-id: u3, resource-qty: u6} {resource-id: u4, resource-qty: u6} {resource-id: u39, resource-qty: u1} {resource-id: u2, resource-qty: u7}))</span></a>
<a name="190"><span class="lineNum">     190 </span><span class="lineCov">        279 : (map-set level-up-system {id: u42} (list {resource-id: u3, resource-qty: u2} {resource-id: u41, resource-qty: u1} {resource-id: u2, resource-qty: u1}))</span></a>
<a name="191"><span class="lineNum">     191 </span><span class="lineCov">        279 : (map-set level-up-system {id: u43} (list {resource-id: u3, resource-qty: u4} {resource-id: u42, resource-qty: u1} {resource-id: u2, resource-qty: u2}))</span></a>
<a name="192"><span class="lineNum">     192 </span><span class="lineCov">        279 : (map-set level-up-system {id: u45} (list {resource-id: u4, resource-qty: u2} {resource-id: u44, resource-qty: u1} {resource-id: u2, resource-qty: u3}))</span></a>
<a name="193"><span class="lineNum">     193 </span><span class="lineCov">        279 : (map-set level-up-system {id: u46} (list {resource-id: u4, resource-qty: u4} {resource-id: u45, resource-qty: u1} {resource-id: u2, resource-qty: u4}))</span></a>
<a name="194"><span class="lineNum">     194 </span><span class="lineCov">        341 : (map-set level-up-system {id: u48} (list {resource-id: u3, resource-qty: u3} {resource-id: u4, resource-qty: u3} {resource-id: u47, resource-qty: u1} {resource-id: u2, resource-qty: u6}))</span></a>
<a name="195"><span class="lineNum">     195 </span><span class="lineCov">        341 : (map-set level-up-system {id: u49} (list {resource-id: u3, resource-qty: u5} {resource-id: u4, resource-qty: u5} {resource-id: u48, resource-qty: u1} {resource-id: u2, resource-qty: u7}))</span></a>
<a name="196"><span class="lineNum">     196 </span>            : </a>
<a name="197"><span class="lineNum">     197 </span>            : (define-constant level-up-id-list (list u6 u7 u9 u10 u12 u13 u15 u16 u18 u19 u21 u22 u24 u25 u27 u28 u30 u31 u33 u34 u36 u37 u39 u40 u42 u43 u45 u46 u48 u49))</a>
<a name="198"><span class="lineNum">     198 </span>            : </a>
<a name="199"><span class="lineNum">     199 </span>            : (define-private (get-data-level-up (id uint))</a>
<a name="200"><span class="lineNum">     200 </span><span class="lineCov">        120 :   {id: id, level-up-data: (unwrap-panic (map-get? level-up-system {id: id}))})</span></a>
<a name="201"><span class="lineNum">     201 </span>            : </a>
<a name="202"><span class="lineNum">     202 </span>            : (define-read-only (get-all-level-up-data) </a>
<a name="203"><span class="lineNum">     203 </span><span class="lineCov">          3 :   (ok (map get-data-level-up level-up-id-list)))</span></a>
<a name="204"><span class="lineNum">     204 </span>            : </a>
<a name="205"><span class="lineNum">     205 </span>            : ;; Crafting</a>
<a name="206"><span class="lineNum">     206 </span>            : </a>
<a name="207"><span class="lineNum">     207 </span>            : (define-map crafting-system { id: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="208"><span class="lineNum">     208 </span>            : </a>
<a name="209"><span class="lineNum">     209 </span>            : (define-public (craft-item (id-new uint))</a>
<a name="210"><span class="lineNum">     210 </span><span class="lineCov">         92 :   (begin</span></a>
<a name="211"><span class="lineNum">     211 </span><span class="lineCov">        552 :     (asserts! (not (is-none (unwrap-panic (get-crafting-resources id-new)))) err-not-some)</span></a>
<a name="212"><span class="lineNum">     212 </span><span class="lineCov">        368 :     (let  ((crafting-resources (unwrap-panic (get-crafting-resources id-new))))</span></a>
<a name="213"><span class="lineNum">     213 </span><span class="lineCov">        374 :       (asserts! (verified-ownership-function (unwrap-panic crafting-resources)) err-insufficient-balance)</span></a>
<a name="214"><span class="lineNum">     214 </span><span class="lineCov">        344 :       (some (map burn-wrapper (unwrap-panic crafting-resources)))</span></a>
<a name="215"><span class="lineNum">     215 </span><span class="lineCov">        344 :       (mint-wrapper-user id-new u1 tx-sender))))</span></a>
<a name="216"><span class="lineNum">     216 </span>            : </a>
<a name="217"><span class="lineNum">     217 </span>            : (define-read-only (get-crafting-resources (token-id uint))</a>
<a name="218"><span class="lineNum">     218 </span><span class="lineCov">        687 :   (let ((token-urr (map-get? crafting-system {id: token-id})))</span></a>
<a name="219"><span class="lineNum">     219 </span><span class="lineCov">        458 :     (ok token-urr)))</span></a>
<a name="220"><span class="lineNum">     220 </span>            : </a>
<a name="221"><span class="lineNum">     221 </span>            : (define-public (set-crafting-resources (token-id uint) (resource-needed (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="222"><span class="lineNum">     222 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="223"><span class="lineNum">     223 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="224"><span class="lineNum">     224 </span><span class="lineCov">          4 :     (ok (map-set crafting-system {id: token-id} resource-needed))))     </span></a>
<a name="225"><span class="lineNum">     225 </span>            : </a>
<a name="226"><span class="lineNum">     226 </span><span class="lineCov">         31 : </span></a>
<a name="227"><span class="lineNum">     227 </span><span class="lineCov">        124 : (map-set crafting-system {id: u5} (list {resource-id: u3, resource-qty: u4}))</span></a>
<a name="228"><span class="lineNum">     228 </span><span class="lineCov">        155 : (map-set crafting-system {id: u8} (list {resource-id: u4, resource-qty: u4}))</span></a>
<a name="229"><span class="lineNum">     229 </span><span class="lineCov">        279 : (map-set crafting-system {id: u11} (list {resource-id: u7, resource-qty: u1} {resource-id: u10, resource-qty: u1} {resource-id: u2, resource-qty: u7}))</span></a>
<a name="230"><span class="lineNum">     230 </span><span class="lineCov">        155 : (map-set crafting-system {id: u14} (list {resource-id: u3, resource-qty: u4}))</span></a>
<a name="231"><span class="lineNum">     231 </span><span class="lineCov">        155 : (map-set crafting-system {id: u17} (list {resource-id: u4, resource-qty: u4}))</span></a>
<a name="232"><span class="lineNum">     232 </span><span class="lineCov">        279 : (map-set crafting-system {id: u20} (list {resource-id: u16, resource-qty: u1} {resource-id: u19, resource-qty: u1} {resource-id: u2, resource-qty: u7}))</span></a>
<a name="233"><span class="lineNum">     233 </span><span class="lineCov">        155 : (map-set crafting-system {id: u23} (list {resource-id: u3, resource-qty: u2}))</span></a>
<a name="234"><span class="lineNum">     234 </span><span class="lineCov">        155 : (map-set crafting-system {id: u26} (list {resource-id: u4, resource-qty: u2}))</span></a>
<a name="235"><span class="lineNum">     235 </span><span class="lineCov">        279 : (map-set crafting-system {id: u29} (list {resource-id: u25, resource-qty: u1} {resource-id: u28, resource-qty: u1} {resource-id: u2, resource-qty: u5}))</span></a>
<a name="236"><span class="lineNum">     236 </span><span class="lineCov">        155 : (map-set crafting-system {id: u32} (list {resource-id: u3, resource-qty: u2}))</span></a>
<a name="237"><span class="lineNum">     237 </span><span class="lineCov">        155 : (map-set crafting-system {id: u35} (list {resource-id: u4, resource-qty: u2}))</span></a>
<a name="238"><span class="lineNum">     238 </span><span class="lineCov">        279 : (map-set crafting-system {id: u38} (list {resource-id: u34, resource-qty: u1} {resource-id: u37, resource-qty: u1} {resource-id: u2, resource-qty: u5}))</span></a>
<a name="239"><span class="lineNum">     239 </span><span class="lineCov">        155 : (map-set crafting-system {id: u41} (list {resource-id: u3, resource-qty: u1}))</span></a>
<a name="240"><span class="lineNum">     240 </span><span class="lineCov">        155 : (map-set crafting-system {id: u44} (list {resource-id: u4, resource-qty: u1}))</span></a>
<a name="241"><span class="lineNum">     241 </span><span class="lineCov">        279 : (map-set crafting-system {id: u47} (list {resource-id: u43, resource-qty: u1} {resource-id: u46, resource-qty: u1} {resource-id: u2, resource-qty: u5}))</span></a>
<a name="242"><span class="lineNum">     242 </span>            : ;; collection 1</a>
<a name="243"><span class="lineNum">     243 </span><span class="lineCov">        217 : (map-set crafting-system {id: u52} (list {resource-id: u3, resource-qty: u2} {resource-id: u4, resource-qty: u4}))</span></a>
<a name="244"><span class="lineNum">     244 </span><span class="lineCov">        217 : (map-set crafting-system {id: u53} (list {resource-id: u3, resource-qty: u2} {resource-id: u50, resource-qty: u4}))</span></a>
<a name="245"><span class="lineNum">     245 </span><span class="lineCov">        217 : (map-set crafting-system {id: u54} (list {resource-id: u3, resource-qty: u2} {resource-id: u51, resource-qty: u4}))</span></a>
<a name="246"><span class="lineNum">     246 </span><span class="lineCov">        217 : (map-set crafting-system {id: u55} (list {resource-id: u3, resource-qty: u2} {resource-id: u4, resource-qty: u5}))</span></a>
<a name="247"><span class="lineNum">     247 </span><span class="lineCov">        217 : (map-set crafting-system {id: u56} (list {resource-id: u3, resource-qty: u2} {resource-id: u50, resource-qty: u5}))</span></a>
<a name="248"><span class="lineNum">     248 </span><span class="lineCov">        217 : (map-set crafting-system {id: u57} (list {resource-id: u3, resource-qty: u2} {resource-id: u51, resource-qty: u5}))</span></a>
<a name="249"><span class="lineNum">     249 </span>            : </a>
<a name="250"><span class="lineNum">     250 </span>            : (define-constant crafting-id-list (list u5 u8 u11 u14 u17 u20 u23 u26 u29 u32 u35 u38 u41 u44 u47 u52 u53 u54 u55 u56 u57))</a>
<a name="251"><span class="lineNum">     251 </span>            : </a>
<a name="252"><span class="lineNum">     252 </span>            : (define-private (get-data-crafting (id uint))</a>
<a name="253"><span class="lineNum">     253 </span><span class="lineCov">         84 :   {id: id, crafting-data: (unwrap-panic (map-get? crafting-system {id: id}))})</span></a>
<a name="254"><span class="lineNum">     254 </span>            : </a>
<a name="255"><span class="lineNum">     255 </span>            : (define-read-only (get-all-crafting-data) </a>
<a name="256"><span class="lineNum">     256 </span><span class="lineCov">          3 :   (ok (map get-data-crafting crafting-id-list)))</span></a>
<a name="257"><span class="lineNum">     257 </span>            : </a>
<a name="258"><span class="lineNum">     258 </span>            : ;; Acquisition</a>
<a name="259"><span class="lineNum">     259 </span>            : </a>
<a name="260"><span class="lineNum">     260 </span>            : (define-map acquisition-system { id: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="261"><span class="lineNum">     261 </span>            : </a>
<a name="262"><span class="lineNum">     262 </span>            : (define-public (buy-item (id-new uint))</a>
<a name="263"><span class="lineNum">     263 </span><span class="lineCov">         71 :   (begin</span></a>
<a name="264"><span class="lineNum">     264 </span><span class="lineCov">        426 :     (asserts! (not (is-none (unwrap-panic (get-acquisition-resources id-new)))) err-not-some)</span></a>
<a name="265"><span class="lineNum">     265 </span><span class="lineCov">        284 :     (let  ((acquisition-resources (unwrap-panic (get-acquisition-resources id-new)))) </span></a>
<a name="266"><span class="lineNum">     266 </span><span class="lineCov">        289 :       (asserts! (verified-ownership-function (unwrap-panic acquisition-resources)) err-insufficient-balance)</span></a>
<a name="267"><span class="lineNum">     267 </span><span class="lineCov">        264 :       (some (map burn-wrapper (unwrap-panic acquisition-resources)))</span></a>
<a name="268"><span class="lineNum">     268 </span><span class="lineCov">        264 :       (mint-wrapper-user id-new u1 tx-sender))))</span></a>
<a name="269"><span class="lineNum">     269 </span>            : </a>
<a name="270"><span class="lineNum">     270 </span>            : (define-read-only (get-acquisition-resources (token-id uint))</a>
<a name="271"><span class="lineNum">     271 </span><span class="lineCov">        561 :     (let ((token-urr (map-get? acquisition-system {id: token-id})))</span></a>
<a name="272"><span class="lineNum">     272 </span><span class="lineCov">        374 :       (ok token-urr)))</span></a>
<a name="273"><span class="lineNum">     273 </span>            : </a>
<a name="274"><span class="lineNum">     274 </span>            : (define-public (set-acquisition-resources (token-id uint) (resource-needed (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="275"><span class="lineNum">     275 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="276"><span class="lineNum">     276 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="277"><span class="lineNum">     277 </span><span class="lineCov">          4 :     (ok (map-set acquisition-system {id: token-id} resource-needed))))</span></a>
<a name="278"><span class="lineNum">     278 </span>            : </a>
<a name="279"><span class="lineNum">     279 </span><span class="lineCov">         31 : </span></a>
<a name="280"><span class="lineNum">     280 </span><span class="lineCov">        124 : (map-set acquisition-system {id: u3} (list {resource-id: u1, resource-qty: u3}))</span></a>
<a name="281"><span class="lineNum">     281 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u4} (list {resource-id: u1, resource-qty: u5}))</span></a>
<a name="282"><span class="lineNum">     282 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u5} (list {resource-id: u1, resource-qty: u15}))</span></a>
<a name="283"><span class="lineNum">     283 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u6} (list {resource-id: u1, resource-qty: u40} {resource-id: u3, resource-qty: u7}))</span></a>
<a name="284"><span class="lineNum">     284 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u9} (list {resource-id: u1, resource-qty: u5} {resource-id: u4, resource-qty: u20}))</span></a>
<a name="285"><span class="lineNum">     285 </span><span class="lineCov">        279 : (map-set acquisition-system {id: u12} (list {resource-id: u1, resource-qty: u500} {resource-id: u3, resource-qty: u11} {resource-id: u4, resource-qty: u11}))</span></a>
<a name="286"><span class="lineNum">     286 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u14} (list {resource-id: u1, resource-qty: u15}))</span></a>
<a name="287"><span class="lineNum">     287 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u16} (list {resource-id: u1, resource-qty: u50} {resource-id: u3, resource-qty: u17}))</span></a>
<a name="288"><span class="lineNum">     288 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u18} (list {resource-id: u1, resource-qty: u5} {resource-id: u4, resource-qty: u20}))</span></a>
<a name="289"><span class="lineNum">     289 </span><span class="lineCov">        279 : (map-set acquisition-system {id: u21} (list {resource-id: u1, resource-qty: u400} {resource-id: u3, resource-qty: u12} {resource-id: u4, resource-qty: u12}))</span></a>
<a name="290"><span class="lineNum">     290 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u25} (list {resource-id: u1, resource-qty: u15} {resource-id: u3, resource-qty: u4}))</span></a>
<a name="291"><span class="lineNum">     291 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u27} (list {resource-id: u1, resource-qty: u230} {resource-id: u4, resource-qty: u3}))</span></a>
<a name="292"><span class="lineNum">     292 </span><span class="lineCov">        279 : (map-set acquisition-system {id: u30} (list {resource-id: u1, resource-qty: u670} {resource-id: u3, resource-qty: u7} {resource-id: u4, resource-qty: u7}))</span></a>
<a name="293"><span class="lineNum">     293 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u34} (list {resource-id: u1, resource-qty: u150} {resource-id: u3, resource-qty: u4}))</span></a>
<a name="294"><span class="lineNum">     294 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u36} (list {resource-id: u1, resource-qty: u230} {resource-id: u4, resource-qty: u3}))</span></a>
<a name="295"><span class="lineNum">     295 </span><span class="lineCov">        279 : (map-set acquisition-system {id: u38} (list {resource-id: u1, resource-qty: u370} {resource-id: u3, resource-qty: u6} {resource-id: u4, resource-qty: u6}))</span></a>
<a name="296"><span class="lineNum">     296 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u42} (list {resource-id: u1, resource-qty: u25} {resource-id: u3, resource-qty: u2}))</span></a>
<a name="297"><span class="lineNum">     297 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u43} (list {resource-id: u1, resource-qty: u120} {resource-id: u3, resource-qty: u5}))</span></a>
<a name="298"><span class="lineNum">     298 </span><span class="lineCov">        217 : (map-set acquisition-system {id: u45} (list {resource-id: u1, resource-qty: u1} {resource-id: u4, resource-qty: u10}))</span></a>
<a name="299"><span class="lineNum">     299 </span>            : ;; collection 1</a>
<a name="300"><span class="lineNum">     300 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u50} (list {resource-id: u1, resource-qty: u500}))</span></a>
<a name="301"><span class="lineNum">     301 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u51} (list {resource-id: u1, resource-qty: u1000}))</span></a>
<a name="302"><span class="lineNum">     302 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u52} (list {resource-id: u1, resource-qty: u15}))</span></a>
<a name="303"><span class="lineNum">     303 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u53} (list {resource-id: u1, resource-qty: u50}))</span></a>
<a name="304"><span class="lineNum">     304 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u54} (list {resource-id: u1, resource-qty: u100}))</span></a>
<a name="305"><span class="lineNum">     305 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u55} (list {resource-id: u1, resource-qty: u30}))</span></a>
<a name="306"><span class="lineNum">     306 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u56} (list {resource-id: u1, resource-qty: u100}))</span></a>
<a name="307"><span class="lineNum">     307 </span><span class="lineCov">        155 : (map-set acquisition-system {id: u57} (list {resource-id: u1, resource-qty: u200}))</span></a>
<a name="308"><span class="lineNum">     308 </span>            : </a>
<a name="309"><span class="lineNum">     309 </span>            : (define-constant acquisition-id-list (list u3 u4 u5 u6 u9 u14 u16 u18 u21 u25 u27 u30 u34 u36 u38 u42 u43 u45 u50 u51 u52 u53 u54 u55 u56 u57))</a>
<a name="310"><span class="lineNum">     310 </span>            : </a>
<a name="311"><span class="lineNum">     311 </span>            : (define-private (get-data-acquisition (id uint))</a>
<a name="312"><span class="lineNum">     312 </span><span class="lineCov">        104 :   {id: id, acquisition-data: (unwrap-panic (map-get? acquisition-system {id: id}))})</span></a>
<a name="313"><span class="lineNum">     313 </span>            : </a>
<a name="314"><span class="lineNum">     314 </span>            : (define-read-only (get-all-acquisition-data) </a>
<a name="315"><span class="lineNum">     315 </span><span class="lineCov">          3 :   (ok (map get-data-acquisition acquisition-id-list)))</span></a>
<a name="316"><span class="lineNum">     316 </span>            : </a>
<a name="317"><span class="lineNum">     317 </span>            : ;; Fighting </a>
<a name="318"><span class="lineNum">     318 </span>            : ;; Fight Needed Resources</a>
<a name="319"><span class="lineNum">     319 </span>            : </a>
<a name="320"><span class="lineNum">     320 </span>            : (define-map fight-needed-resources {fight-number: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="321"><span class="lineNum">     321 </span>            : </a>
<a name="322"><span class="lineNum">     322 </span>            : (define-public (start-fight (fight-number uint)) </a>
<a name="323"><span class="lineNum">     323 </span><span class="lineCov">          7 :   (begin</span></a>
<a name="324"><span class="lineNum">     324 </span><span class="lineCov">         42 :     (asserts! (not (is-none (unwrap-panic (get-fight-needed-resources fight-number)))) err-not-some)</span></a>
<a name="325"><span class="lineNum">     325 </span><span class="lineCov">         28 :     (let ((fight-resources-needed (unwrap-panic (get-fight-needed-resources fight-number)))) </span></a>
<a name="326"><span class="lineNum">     326 </span><span class="lineCov">         28 :       (asserts! (verified-ownership-function (unwrap-panic fight-resources-needed)) err-insufficient-balance)</span></a>
<a name="327"><span class="lineNum">     327 </span><span class="lineCov">         28 :       (some (map burn-wrapper (unwrap-panic fight-resources-needed)))</span></a>
<a name="328"><span class="lineNum">     328 </span><span class="lineCov">         14 :       (ok true))))</span></a>
<a name="329"><span class="lineNum">     329 </span>            : </a>
<a name="330"><span class="lineNum">     330 </span>            : (define-read-only (get-fight-needed-resources (fight-number uint))</a>
<a name="331"><span class="lineNum">     331 </span><span class="lineCov">         42 :   (let ((token-urr (map-get? fight-needed-resources {fight-number: fight-number})))</span></a>
<a name="332"><span class="lineNum">     332 </span><span class="lineCov">         28 :     (ok token-urr)))</span></a>
<a name="333"><span class="lineNum">     333 </span>            : </a>
<a name="334"><span class="lineNum">     334 </span>            : (define-public (set-fight-needed-resources (fight-number uint) (resource-needed (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="335"><span class="lineNum">     335 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="336"><span class="lineNum">     336 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="337"><span class="lineNum">     337 </span><span class="lineCov">          4 :     (ok (map-set fight-needed-resources {fight-number: fight-number} resource-needed))))</span></a>
<a name="338"><span class="lineNum">     338 </span>            : </a>
<a name="339"><span class="lineNum">     339 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u1} (list {resource-id: u2, resource-qty: u10}))</span></a>
<a name="340"><span class="lineNum">     340 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u2} (list {resource-id: u2, resource-qty: u12}))</span></a>
<a name="341"><span class="lineNum">     341 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u3} (list {resource-id: u2, resource-qty: u15}))</span></a>
<a name="342"><span class="lineNum">     342 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u4} (list {resource-id: u2, resource-qty: u19}))</span></a>
<a name="343"><span class="lineNum">     343 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u5} (list {resource-id: u2, resource-qty: u30}))</span></a>
<a name="344"><span class="lineNum">     344 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u6} (list {resource-id: u2, resource-qty: u32}))</span></a>
<a name="345"><span class="lineNum">     345 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u7} (list {resource-id: u2, resource-qty: u36}))</span></a>
<a name="346"><span class="lineNum">     346 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u8} (list {resource-id: u2, resource-qty: u42}))</span></a>
<a name="347"><span class="lineNum">     347 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u9} (list {resource-id: u2, resource-qty: u50}))</span></a>
<a name="348"><span class="lineNum">     348 </span><span class="lineCov">        155 : (map-set fight-needed-resources {fight-number: u10} (list {resource-id: u2, resource-qty: u70}))</span></a>
<a name="349"><span class="lineNum">     349 </span>            : </a>
<a name="350"><span class="lineNum">     350 </span>            : (define-constant fight-resources-id-list (list u1 u2 u3 u4 u5 u6 u7 u8 u9 u10))</a>
<a name="351"><span class="lineNum">     351 </span>            : </a>
<a name="352"><span class="lineNum">     352 </span>            : (define-private (get-data-fight-resources (id uint))</a>
<a name="353"><span class="lineNum">     353 </span><span class="lineCov">         40 :   {fight-number: id, fight-resources-data: (unwrap-panic (map-get? fight-needed-resources {fight-number: id}))})</span></a>
<a name="354"><span class="lineNum">     354 </span>            : </a>
<a name="355"><span class="lineNum">     355 </span>            : (define-read-only (get-all-fight-resources-data) </a>
<a name="356"><span class="lineNum">     356 </span><span class="lineCov">          3 :   (ok (map get-data-fight-resources fight-resources-id-list)))</span></a>
<a name="357"><span class="lineNum">     357 </span>            : </a>
<a name="358"><span class="lineNum">     358 </span>            : ;; Fight Rewards</a>
<a name="359"><span class="lineNum">     359 </span>            : </a>
<a name="360"><span class="lineNum">     360 </span>            : (define-map fight-reward-system { fight-number: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="361"><span class="lineNum">     361 </span>            : </a>
<a name="362"><span class="lineNum">     362 </span>            : (define-public (reward-fighting (fight-number uint) (user principal))</a>
<a name="363"><span class="lineNum">     363 </span><span class="lineCov">          6 :   (begin</span></a>
<a name="364"><span class="lineNum">     364 </span><span class="lineCov">         24 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)</span></a>
<a name="365"><span class="lineNum">     365 </span><span class="lineCov">         36 :     (asserts! (not (is-none (unwrap-panic (get-fight-rewards fight-number)))) err-not-some)</span></a>
<a name="366"><span class="lineNum">     366 </span><span class="lineCov">         24 :     (let ((fighting-rewards (unwrap-panic (get-fight-rewards fight-number)))) </span></a>
<a name="367"><span class="lineNum">     367 </span><span class="lineCov">         18 :       (asserts! (is-some fighting-rewards) err-not-some)</span></a>
<a name="368"><span class="lineNum">     368 </span><span class="lineCov">         30 :       (ok (fold mint-rewards (unwrap-panic fighting-rewards) user)))))</span></a>
<a name="369"><span class="lineNum">     369 </span>            : </a>
<a name="370"><span class="lineNum">     370 </span>            : (define-read-only (get-fight-rewards (fight-number uint))</a>
<a name="371"><span class="lineNum">     371 </span><span class="lineCov">         36 :   (let ((token-urr (map-get? fight-reward-system {fight-number: fight-number})))</span></a>
<a name="372"><span class="lineNum">     372 </span><span class="lineCov">         24 :     (ok token-urr)))</span></a>
<a name="373"><span class="lineNum">     373 </span>            : </a>
<a name="374"><span class="lineNum">     374 </span>            : (define-public (set-fight-rewards (fight-number uint) (resource-rewarded (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="375"><span class="lineNum">     375 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="376"><span class="lineNum">     376 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="377"><span class="lineNum">     377 </span><span class="lineCov">          4 :     (ok (map-set fight-reward-system {fight-number: fight-number} resource-rewarded))))</span></a>
<a name="378"><span class="lineNum">     378 </span>            : </a>
<a name="379"><span class="lineNum">     379 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u1} (list {resource-id: u1, resource-qty: u100}))</span></a>
<a name="380"><span class="lineNum">     380 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u2} (list {resource-id: u1, resource-qty: u120}))</span></a>
<a name="381"><span class="lineNum">     381 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u3} (list {resource-id: u1, resource-qty: u150}))</span></a>
<a name="382"><span class="lineNum">     382 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u4} (list {resource-id: u1, resource-qty: u190}))</span></a>
<a name="383"><span class="lineNum">     383 </span><span class="lineCov">        217 : (map-set fight-reward-system {fight-number: u5} (list {resource-id: u1, resource-qty: u300} {resource-id: u7, resource-qty: u1}))</span></a>
<a name="384"><span class="lineNum">     384 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u6} (list {resource-id: u1, resource-qty: u320}))</span></a>
<a name="385"><span class="lineNum">     385 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u7} (list {resource-id: u1, resource-qty: u360}))</span></a>
<a name="386"><span class="lineNum">     386 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u8} (list {resource-id: u1, resource-qty: u420}))</span></a>
<a name="387"><span class="lineNum">     387 </span><span class="lineCov">        155 : (map-set fight-reward-system {fight-number: u9} (list {resource-id: u1, resource-qty: u500}))</span></a>
<a name="388"><span class="lineNum">     388 </span><span class="lineCov">        217 : (map-set fight-reward-system {fight-number: u10} (list {resource-id: u1, resource-qty: u700} {resource-id: u13, resource-qty: u1}))</span></a>
<a name="389"><span class="lineNum">     389 </span>            : </a>
<a name="390"><span class="lineNum">     390 </span>            : (define-constant fight-rewards-id-list (list u1 u2 u3 u4 u5 u6 u7 u8 u9 u10))</a>
<a name="391"><span class="lineNum">     391 </span>            : </a>
<a name="392"><span class="lineNum">     392 </span>            : (define-private (get-data-fight-rewards (id uint))</a>
<a name="393"><span class="lineNum">     393 </span><span class="lineCov">         40 :   {fight-number: id, fight-rewards-data: (unwrap-panic (map-get? fight-reward-system {fight-number: id}))})</span></a>
<a name="394"><span class="lineNum">     394 </span>            : </a>
<a name="395"><span class="lineNum">     395 </span>            : (define-read-only (get-all-fight-rewards-data) </a>
<a name="396"><span class="lineNum">     396 </span><span class="lineCov">          3 :   (ok (map get-data-fight-rewards fight-rewards-id-list)))</span></a>
<a name="397"><span class="lineNum">     397 </span>            : </a>
<a name="398"><span class="lineNum">     398 </span>            : ;; Sleeping reward center</a>
<a name="399"><span class="lineNum">     399 </span>            : </a>
<a name="400"><span class="lineNum">     400 </span>            : (define-map sleeping-reward-system {sleeping-time: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="401"><span class="lineNum">     401 </span>            : </a>
<a name="402"><span class="lineNum">     402 </span>            : (define-public (reward-sleeping (sleeping-time uint) (user principal))</a>
<a name="403"><span class="lineNum">     403 </span><span class="lineCov">          3 :   (begin</span></a>
<a name="404"><span class="lineNum">     404 </span><span class="lineCov">         12 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)</span></a>
<a name="405"><span class="lineNum">     405 </span><span class="lineCov">         18 :     (asserts! (not (is-none (unwrap-panic (get-sleeping-rewards sleeping-time)))) err-not-some)</span></a>
<a name="406"><span class="lineNum">     406 </span><span class="lineCov">         12 :     (let ((sleeping-rewards (unwrap-panic (get-sleeping-rewards sleeping-time)))) </span></a>
<a name="407"><span class="lineNum">     407 </span><span class="lineCov">          9 :       (asserts! (is-some sleeping-rewards) err-not-some)</span></a>
<a name="408"><span class="lineNum">     408 </span><span class="lineCov">         15 :       (ok (fold mint-rewards (unwrap-panic sleeping-rewards) user)))))</span></a>
<a name="409"><span class="lineNum">     409 </span>            : </a>
<a name="410"><span class="lineNum">     410 </span>            : (define-read-only (get-sleeping-rewards (sleeping-time uint))</a>
<a name="411"><span class="lineNum">     411 </span><span class="lineCov">         18 :   (let ((token-urr (map-get? sleeping-reward-system {sleeping-time: sleeping-time})))</span></a>
<a name="412"><span class="lineNum">     412 </span><span class="lineCov">         12 :     (ok token-urr)))</span></a>
<a name="413"><span class="lineNum">     413 </span>            : </a>
<a name="414"><span class="lineNum">     414 </span>            : (define-public (set-sleeping-rewards (sleeping-time uint) (resource-achieved (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="415"><span class="lineNum">     415 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="416"><span class="lineNum">     416 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="417"><span class="lineNum">     417 </span><span class="lineCov">          4 :     (ok (map-set sleeping-reward-system {sleeping-time: sleeping-time} resource-achieved))))</span></a>
<a name="418"><span class="lineNum">     418 </span>            : </a>
<a name="419"><span class="lineNum">     419 </span><span class="lineCov">        155 : (map-set sleeping-reward-system {sleeping-time: u5} (list {resource-id: u2, resource-qty: u5}))</span></a>
<a name="420"><span class="lineNum">     420 </span><span class="lineCov">        155 : (map-set sleeping-reward-system {sleeping-time: u10} (list {resource-id: u2, resource-qty: u15}))</span></a>
<a name="421"><span class="lineNum">     421 </span><span class="lineCov">        155 : (map-set sleeping-reward-system {sleeping-time: u20} (list {resource-id: u2, resource-qty: u40}))</span></a>
<a name="422"><span class="lineNum">     422 </span>            : </a>
<a name="423"><span class="lineNum">     423 </span>            : (define-constant sleeping-rewards-id-list (list u5 u10 u20))</a>
<a name="424"><span class="lineNum">     424 </span>            : </a>
<a name="425"><span class="lineNum">     425 </span>            : (define-private (get-data-sleeping-rewards (id uint))</a>
<a name="426"><span class="lineNum">     426 </span><span class="lineCov">         12 :   {sleeping-time: id, sleeping-rewards-data: (unwrap-panic (map-get? sleeping-reward-system {sleeping-time: id}))})</span></a>
<a name="427"><span class="lineNum">     427 </span>            : </a>
<a name="428"><span class="lineNum">     428 </span>            : (define-read-only (get-all-sleeping-rewards-data) </a>
<a name="429"><span class="lineNum">     429 </span><span class="lineCov">          3 :   (ok (map get-data-sleeping-rewards sleeping-rewards-id-list)))</span></a>
<a name="430"><span class="lineNum">     430 </span>            : </a>
<a name="431"><span class="lineNum">     431 </span>            : ;; Mining reward center</a>
<a name="432"><span class="lineNum">     432 </span>            : </a>
<a name="433"><span class="lineNum">     433 </span>            : (define-map mining-reward-system { token-id: uint, mining-time: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="434"><span class="lineNum">     434 </span>            : </a>
<a name="435"><span class="lineNum">     435 </span>            : (define-public (reward-mining (token-id uint) (mining-time uint) (user principal))</a>
<a name="436"><span class="lineNum">     436 </span><span class="lineCov">          3 :   (begin</span></a>
<a name="437"><span class="lineNum">     437 </span><span class="lineCov">         12 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)</span></a>
<a name="438"><span class="lineNum">     438 </span><span class="lineCov">         21 :     (asserts! (not (is-none (unwrap-panic (get-mining-rewards token-id mining-time)))) err-not-some)</span></a>
<a name="439"><span class="lineNum">     439 </span><span class="lineCov">         15 :     (let  ((mining-rewards (unwrap-panic (get-mining-rewards token-id mining-time)))) </span></a>
<a name="440"><span class="lineNum">     440 </span><span class="lineCov">          9 :       (asserts! (is-some mining-rewards) err-not-some)</span></a>
<a name="441"><span class="lineNum">     441 </span><span class="lineCov">         15 :       (ok (fold mint-rewards (unwrap-panic mining-rewards) user)))))</span></a>
<a name="442"><span class="lineNum">     442 </span>            : </a>
<a name="443"><span class="lineNum">     443 </span>            : (define-read-only (get-mining-rewards (token-id uint) (mining-time uint))</a>
<a name="444"><span class="lineNum">     444 </span><span class="lineCov">         24 :     (let ((token-urr (map-get? mining-reward-system {token-id: token-id, mining-time: mining-time})))</span></a>
<a name="445"><span class="lineNum">     445 </span><span class="lineCov">         12 :       (ok token-urr)))</span></a>
<a name="446"><span class="lineNum">     446 </span>            : </a>
<a name="447"><span class="lineNum">     447 </span>            : (define-public (set-mining-rewards (token-id uint) (mining-time uint) (resource-achieved (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="448"><span class="lineNum">     448 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="449"><span class="lineNum">     449 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="450"><span class="lineNum">     450 </span><span class="lineCov">          5 :     (ok (map-set mining-reward-system {token-id: token-id, mining-time: mining-time} resource-achieved))))</span></a>
<a name="451"><span class="lineNum">     451 </span>            : </a>
<a name="452"><span class="lineNum">     452 </span><span class="lineCov">         31 : </span></a>
<a name="453"><span class="lineNum">     453 </span><span class="lineCov">        155 : (map-set mining-reward-system {token-id: u55, mining-time: u5} (list {resource-id: u4, resource-qty: u1}))</span></a>
<a name="454"><span class="lineNum">     454 </span><span class="lineCov">        186 : (map-set mining-reward-system {token-id: u55, mining-time: u10} (list {resource-id: u4, resource-qty: u3}))</span></a>
<a name="455"><span class="lineNum">     455 </span><span class="lineCov">        248 : (map-set mining-reward-system {token-id: u55, mining-time: u20} (list {resource-id: u4, resource-qty: u5} {resource-id: u50, resource-qty: u1}))</span></a>
<a name="456"><span class="lineNum">     456 </span><span class="lineCov">        186 : (map-set mining-reward-system {token-id: u56, mining-time: u5} (list {resource-id: u4, resource-qty: u4}))</span></a>
<a name="457"><span class="lineNum">     457 </span><span class="lineCov">        248 : (map-set mining-reward-system {token-id: u56, mining-time: u10} (list {resource-id: u4, resource-qty: u11} {resource-id: u50, resource-qty: u2}))</span></a>
<a name="458"><span class="lineNum">     458 </span><span class="lineCov">        310 : (map-set mining-reward-system {token-id: u56, mining-time: u20} (list {resource-id: u4, resource-qty: u25} {resource-id: u50, resource-qty: u3} {resource-id: u51, resource-qty: u1}))</span></a>
<a name="459"><span class="lineNum">     459 </span><span class="lineCov">        248 : (map-set mining-reward-system {token-id: u57, mining-time: u5} (list {resource-id: u4, resource-qty: u12} {resource-id: u50, resource-qty: u1}))</span></a>
<a name="460"><span class="lineNum">     460 </span><span class="lineCov">        310 : (map-set mining-reward-system {token-id: u57, mining-time: u10} (list {resource-id: u4, resource-qty: u18} {resource-id: u50, resource-qty: u2} {resource-id: u51, resource-qty: u1}))</span></a>
<a name="461"><span class="lineNum">     461 </span><span class="lineCov">        310 : (map-set mining-reward-system {token-id: u57, mining-time: u20} (list {resource-id: u4, resource-qty: u29} {resource-id: u50, resource-qty: u4} {resource-id: u51, resource-qty: u3}))</span></a>
<a name="462"><span class="lineNum">     462 </span>            : </a>
<a name="463"><span class="lineNum">     463 </span>            : (define-constant mining-rewards-id-list </a>
<a name="464"><span class="lineNum">     464 </span>            :   (list </a>
<a name="465"><span class="lineNum">     465 </span>            :     {token-id: u55, mining-time: u5} {token-id: u55, mining-time: u10} {token-id: u55, mining-time: u20}</a>
<a name="466"><span class="lineNum">     466 </span>            :     {token-id: u56, mining-time: u5} {token-id: u56, mining-time: u10} {token-id: u56, mining-time: u20}</a>
<a name="467"><span class="lineNum">     467 </span>            :     {token-id: u57, mining-time: u5} {token-id: u57, mining-time: u10} {token-id: u57, mining-time: u20}))</a>
<a name="468"><span class="lineNum">     468 </span>            : </a>
<a name="469"><span class="lineNum">     469 </span>            : (define-private (get-data-mining-rewards (mining-tuple {token-id: uint, mining-time: uint}))</a>
<a name="470"><span class="lineNum">     470 </span><span class="lineCov">         36 :   {mining-time: (get mining-time mining-tuple), mining-item: (get token-id mining-tuple), mining-rewards-data: </span></a>
<a name="471"><span class="lineNum">     471 </span><span class="lineCov">          9 :     (unwrap-panic </span></a>
<a name="472"><span class="lineNum">     472 </span><span class="lineCov">          9 :       (map-get? mining-reward-system </span></a>
<a name="473"><span class="lineNum">     473 </span><span class="lineCov">         36 :         {mining-time: (get mining-time mining-tuple), token-id: (get token-id mining-tuple)}))})</span></a>
<a name="474"><span class="lineNum">     474 </span>            : </a>
<a name="475"><span class="lineNum">     475 </span>            : (define-read-only (get-all-mining-rewards-data) </a>
<a name="476"><span class="lineNum">     476 </span><span class="lineCov">          3 :   (ok (map get-data-mining-rewards mining-rewards-id-list)))</span></a>
<a name="477"><span class="lineNum">     477 </span>            : </a>
<a name="478"><span class="lineNum">     478 </span>            : ;; Harvesting reward center</a>
<a name="479"><span class="lineNum">     479 </span>            : </a>
<a name="480"><span class="lineNum">     480 </span>            : (define-map harvesting-system { token-id: uint, harvesting-time: uint } (list 100 { resource-id: uint, resource-qty: uint }))</a>
<a name="481"><span class="lineNum">     481 </span>            : </a>
<a name="482"><span class="lineNum">     482 </span>            : (define-public (reward-harvesting (token-id uint) (harvesting-time uint) (user principal))</a>
<a name="483"><span class="lineNum">     483 </span><span class="lineCov">          3 :   (begin</span></a>
<a name="484"><span class="lineNum">     484 </span><span class="lineCov">         12 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)</span></a>
<a name="485"><span class="lineNum">     485 </span><span class="lineCov">         21 :     (asserts! (not (is-none (unwrap-panic (get-harvesting-rewards token-id harvesting-time)))) err-not-some)</span></a>
<a name="486"><span class="lineNum">     486 </span><span class="lineCov">         15 :     (let ((harvesting-rewards (unwrap-panic (get-harvesting-rewards token-id harvesting-time)))) </span></a>
<a name="487"><span class="lineNum">     487 </span><span class="lineCov">          9 :       (asserts! (is-some harvesting-rewards) err-not-some)</span></a>
<a name="488"><span class="lineNum">     488 </span><span class="lineCov">         15 :       (ok (fold mint-rewards (unwrap-panic harvesting-rewards) user)))))</span></a>
<a name="489"><span class="lineNum">     489 </span>            : </a>
<a name="490"><span class="lineNum">     490 </span>            : (define-read-only (get-harvesting-rewards (token-id uint) (harvesting-time uint))</a>
<a name="491"><span class="lineNum">     491 </span><span class="lineCov">         24 :     (let ((token-urr (map-get? harvesting-system {token-id: token-id, harvesting-time: harvesting-time})))</span></a>
<a name="492"><span class="lineNum">     492 </span><span class="lineCov">         12 :       (ok token-urr)))</span></a>
<a name="493"><span class="lineNum">     493 </span>            : </a>
<a name="494"><span class="lineNum">     494 </span>            : (define-public (set-harvesting-rewards (token-id uint) (harvesting-time uint) (resource-achieved (list 100 {resource-id: uint, resource-qty: uint})))</a>
<a name="495"><span class="lineNum">     495 </span><span class="lineCov">          1 :   (begin </span></a>
<a name="496"><span class="lineNum">     496 </span><span class="lineCov">          4 :     (asserts! (is-eq tx-sender contract-owner) err-owner-only)    </span></a>
<a name="497"><span class="lineNum">     497 </span><span class="lineCov">          5 :     (ok (map-set harvesting-system {token-id: token-id, harvesting-time: harvesting-time} resource-achieved))))</span></a>
<a name="498"><span class="lineNum">     498 </span>            : </a>
<a name="499"><span class="lineNum">     499 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u52, harvesting-time: u5} (list {resource-id: u3, resource-qty: u1}))</span></a>
<a name="500"><span class="lineNum">     500 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u52, harvesting-time: u10} (list {resource-id: u3, resource-qty: u3}))</span></a>
<a name="501"><span class="lineNum">     501 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u52, harvesting-time: u20} (list {resource-id: u3, resource-qty: u7}))</span></a>
<a name="502"><span class="lineNum">     502 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u53, harvesting-time: u5} (list {resource-id: u3, resource-qty: u5}))</span></a>
<a name="503"><span class="lineNum">     503 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u53, harvesting-time: u10} (list {resource-id: u3, resource-qty: u12}))</span></a>
<a name="504"><span class="lineNum">     504 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u53, harvesting-time: u20} (list {resource-id: u3, resource-qty: u26}))</span></a>
<a name="505"><span class="lineNum">     505 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u54, harvesting-time: u5} (list {resource-id: u3, resource-qty: u20}))</span></a>
<a name="506"><span class="lineNum">     506 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u54, harvesting-time: u10} (list {resource-id: u3, resource-qty: u45}))</span></a>
<a name="507"><span class="lineNum">     507 </span><span class="lineCov">        186 : (map-set harvesting-system {token-id: u54, harvesting-time: u20} (list {resource-id: u3, resource-qty: u100}))</span></a>
<a name="508"><span class="lineNum">     508 </span>            : </a>
<a name="509"><span class="lineNum">     509 </span>            : (define-constant harvesting-rewards-id-list </a>
<a name="510"><span class="lineNum">     510 </span>            :   (list </a>
<a name="511"><span class="lineNum">     511 </span>            :     {token-id: u52, harvesting-time: u5} {token-id: u52, harvesting-time: u10} {token-id: u52, harvesting-time: u20}</a>
<a name="512"><span class="lineNum">     512 </span>            :     {token-id: u53, harvesting-time: u5} {token-id: u53, harvesting-time: u10} {token-id: u53, harvesting-time: u20}</a>
<a name="513"><span class="lineNum">     513 </span>            :     {token-id: u54, harvesting-time: u5} {token-id: u54, harvesting-time: u10} {token-id: u54, harvesting-time: u20}))</a>
<a name="514"><span class="lineNum">     514 </span>            : </a>
<a name="515"><span class="lineNum">     515 </span>            : (define-private (get-data-harvesting-rewards (harvesting-tuple {token-id: uint, harvesting-time: uint}))</a>
<a name="516"><span class="lineNum">     516 </span><span class="lineCov">         36 :   {harvesting-time: (get harvesting-time harvesting-tuple), harvesting-item: (get token-id harvesting-tuple), harvesting-rewards-data: </span></a>
<a name="517"><span class="lineNum">     517 </span><span class="lineCov">          9 :     (unwrap-panic </span></a>
<a name="518"><span class="lineNum">     518 </span><span class="lineCov">          9 :       (map-get? harvesting-system </span></a>
<a name="519"><span class="lineNum">     519 </span><span class="lineCov">         36 :         {harvesting-time: (get harvesting-time harvesting-tuple), token-id: (get token-id harvesting-tuple)}))})</span></a>
<a name="520"><span class="lineNum">     520 </span>            : </a>
<a name="521"><span class="lineNum">     521 </span>            : (define-read-only (get-all-harvesting-rewards-data) </a>
<a name="522"><span class="lineNum">     522 </span><span class="lineCov">          3 :   (ok (map get-data-harvesting-rewards harvesting-rewards-id-list)))</span></a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="https://github.com/linux-test-project/lcov" target="_parent">LCOV version 1.16</a></td></tr>
  </table>
  <br>

</body>
</html>
